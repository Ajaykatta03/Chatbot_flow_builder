{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\ChatBotFlow\\\\bitespeed-flow-builder\\\\src\\\\components\\\\TopBar\\\\TopBar.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useFlowState, useFlowDispatch } from '../../state/flowContext';\nimport { validateBeforeSave } from '../../utils/validators';\nimport { exportFlow } from '../../utils/export';\nimport Banner from '../UI/Banner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TopBar() {\n  _s();\n  const state = useFlowState();\n  const dispatch = useFlowDispatch();\n  const [banner, setBanner] = useState(null);\n  function clearInvalidMarkers() {\n    state.nodes.forEach(n => {\n      if (n.data && n.data.__invalid) {\n        dispatch({\n          type: 'UPDATE_NODE',\n          id: n.id,\n          data: {\n            __invalid: false\n          }\n        });\n      }\n    });\n  }\n  function onSave() {\n    // clear previous invalid markers\n    clearInvalidMarkers();\n    const res = validateBeforeSave(state.nodes, state.edges);\n    if (!res.ok) {\n      // mark offending nodes with data.__invalid = true so canvas can highlight them\n      res.nodes.forEach(n => {\n        dispatch({\n          type: 'UPDATE_NODE',\n          id: n.id,\n          data: {\n            __invalid: true\n          }\n        });\n      });\n      // show an error banner with clickable offending nodes\n      setBanner({\n        type: 'error',\n        title: 'Cannot save Flow',\n        message: 'More than one node has empty target handles',\n        items: res.nodes\n      });\n      return;\n    }\n    const payload = exportFlow(state.nodes, state.edges);\n    // trigger download\n    const blob = new Blob([payload], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'flow.json';\n    a.click();\n    URL.revokeObjectURL(url);\n    // small success banner briefly\n    setBanner({\n      type: 'success',\n      title: 'Flow exported',\n      message: 'Your flow JSON has been downloaded.'\n    });\n    setTimeout(() => setBanner(null), 2500);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [banner && banner.type === 'error' && /*#__PURE__*/_jsxDEV(Banner, {\n      type: banner.type,\n      title: banner.title,\n      message: banner.message,\n      items: banner.items,\n      onClose: () => setBanner(null),\n      onItemClick: item => {\n        dispatch({\n          type: 'SET_SELECTED',\n          id: item.id\n        });\n        setBanner(null);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this), banner && banner.type === 'success' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal show\",\n      tabIndex: \"-1\",\n      style: {\n        display: 'block',\n        background: 'rgba(0,0,0,0.5)'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-dialog\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-content\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-body\",\n            children: /*#__PURE__*/_jsxDEV(Banner, {\n              type: banner.type,\n              title: banner.title,\n              message: banner.message,\n              onClose: () => setBanner(null)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"topbar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 12\n        },\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Bitespeed Flow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-outline-info\",\n          onClick: onSave,\n          children: \"Save Changes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n}\n_s(TopBar, \"sh8u3Ln5OXlDSHHbXCcOXfD6LM4=\", false, function () {\n  return [useFlowState, useFlowDispatch];\n});\n_c = TopBar;\nvar _c;\n$RefreshReg$(_c, \"TopBar\");","map":{"version":3,"names":["React","useState","useFlowState","useFlowDispatch","validateBeforeSave","exportFlow","Banner","jsxDEV","_jsxDEV","TopBar","_s","state","dispatch","banner","setBanner","clearInvalidMarkers","nodes","forEach","n","data","__invalid","type","id","onSave","res","edges","ok","title","message","items","payload","blob","Blob","url","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","setTimeout","children","onClose","onItemClick","item","fileName","_jsxFileName","lineNumber","columnNumber","className","tabIndex","style","display","background","alignItems","gap","onClick","_c","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/ChatBotFlow/bitespeed-flow-builder/src/components/TopBar/TopBar.js"],"sourcesContent":["import React, { useState } from 'react'\r\nimport { useFlowState, useFlowDispatch } from '../../state/flowContext'\r\nimport { validateBeforeSave } from '../../utils/validators'\r\nimport { exportFlow } from '../../utils/export'\r\nimport Banner from '../UI/Banner'\r\n\r\nexport default function TopBar() {\r\n  const state = useFlowState()\r\n  const dispatch = useFlowDispatch()\r\n  const [banner, setBanner] = useState(null)\r\n\r\n  function clearInvalidMarkers() {\r\n    state.nodes.forEach(n => {\r\n      if (n.data && n.data.__invalid) {\r\n        dispatch({ type: 'UPDATE_NODE', id: n.id, data: { __invalid: false } })\r\n      }\r\n    })\r\n  }\r\n\r\n  function onSave() {\r\n    // clear previous invalid markers\r\n    clearInvalidMarkers()\r\n\r\n    const res = validateBeforeSave(state.nodes, state.edges)\r\n    if (!res.ok) {\r\n      // mark offending nodes with data.__invalid = true so canvas can highlight them\r\n      res.nodes.forEach(n => {\r\n        dispatch({ type: 'UPDATE_NODE', id: n.id, data: { __invalid: true } })\r\n      })\r\n      // show an error banner with clickable offending nodes\r\n      setBanner({\r\n        type: 'error',\r\n        title: 'Cannot save Flow',\r\n        message: 'More than one node has empty target handles',\r\n        items: res.nodes,\r\n      })\r\n      return\r\n    }\r\n\r\n    const payload = exportFlow(state.nodes, state.edges)\r\n    // trigger download\r\n    const blob = new Blob([payload], { type: 'application/json' })\r\n    const url = URL.createObjectURL(blob)\r\n    const a = document.createElement('a')\r\n    a.href = url\r\n    a.download = 'flow.json'\r\n    a.click()\r\n    URL.revokeObjectURL(url)\r\n    // small success banner briefly\r\n    setBanner({ type: 'success', title: 'Flow exported', message: 'Your flow JSON has been downloaded.' })\r\n    setTimeout(() => setBanner(null), 2500)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {/* Show error banner normally */}\r\n      {banner && banner.type === 'error' && (\r\n        <Banner\r\n          type={banner.type}\r\n          title={banner.title}\r\n          message={banner.message}\r\n          items={banner.items}\r\n          onClose={() => setBanner(null)}\r\n          onItemClick={item => {\r\n            dispatch({ type: 'SET_SELECTED', id: item.id })\r\n            setBanner(null)\r\n          }}\r\n        />\r\n      )}\r\n      {/* Show success banner inside Bootstrap modal */}\r\n      {banner && banner.type === 'success' && (\r\n        <div className=\"modal show\" tabIndex=\"-1\" style={{ display: 'block', background: 'rgba(0,0,0,0.5)' }}>\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-body\">\r\n                <Banner\r\n                  type={banner.type}\r\n                  title={banner.title}\r\n                  message={banner.message}\r\n                  onClose={() => setBanner(null)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <header className=\"topbar\">\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>\r\n          <strong>Bitespeed Flow</strong>\r\n        </div>\r\n        <div>\r\n          <button className=\"btn btn-outline-info\" onClick={onSave}>\r\n            Save Changes\r\n          </button>\r\n        </div>\r\n      </header>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,YAAY,EAAEC,eAAe,QAAQ,yBAAyB;AACvE,SAASC,kBAAkB,QAAQ,wBAAwB;AAC3D,SAASC,UAAU,QAAQ,oBAAoB;AAC/C,OAAOC,MAAM,MAAM,cAAc;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEjC,eAAe,SAASC,MAAMA,CAAA,EAAG;EAAAC,EAAA;EAC/B,MAAMC,KAAK,GAAGT,YAAY,CAAC,CAAC;EAC5B,MAAMU,QAAQ,GAAGT,eAAe,CAAC,CAAC;EAClC,MAAM,CAACU,MAAM,EAAEC,SAAS,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAE1C,SAASc,mBAAmBA,CAAA,EAAG;IAC7BJ,KAAK,CAACK,KAAK,CAACC,OAAO,CAACC,CAAC,IAAI;MACvB,IAAIA,CAAC,CAACC,IAAI,IAAID,CAAC,CAACC,IAAI,CAACC,SAAS,EAAE;QAC9BR,QAAQ,CAAC;UAAES,IAAI,EAAE,aAAa;UAAEC,EAAE,EAAEJ,CAAC,CAACI,EAAE;UAAEH,IAAI,EAAE;YAAEC,SAAS,EAAE;UAAM;QAAE,CAAC,CAAC;MACzE;IACF,CAAC,CAAC;EACJ;EAEA,SAASG,MAAMA,CAAA,EAAG;IAChB;IACAR,mBAAmB,CAAC,CAAC;IAErB,MAAMS,GAAG,GAAGpB,kBAAkB,CAACO,KAAK,CAACK,KAAK,EAAEL,KAAK,CAACc,KAAK,CAAC;IACxD,IAAI,CAACD,GAAG,CAACE,EAAE,EAAE;MACX;MACAF,GAAG,CAACR,KAAK,CAACC,OAAO,CAACC,CAAC,IAAI;QACrBN,QAAQ,CAAC;UAAES,IAAI,EAAE,aAAa;UAAEC,EAAE,EAAEJ,CAAC,CAACI,EAAE;UAAEH,IAAI,EAAE;YAAEC,SAAS,EAAE;UAAK;QAAE,CAAC,CAAC;MACxE,CAAC,CAAC;MACF;MACAN,SAAS,CAAC;QACRO,IAAI,EAAE,OAAO;QACbM,KAAK,EAAE,kBAAkB;QACzBC,OAAO,EAAE,6CAA6C;QACtDC,KAAK,EAAEL,GAAG,CAACR;MACb,CAAC,CAAC;MACF;IACF;IAEA,MAAMc,OAAO,GAAGzB,UAAU,CAACM,KAAK,CAACK,KAAK,EAAEL,KAAK,CAACc,KAAK,CAAC;IACpD;IACA,MAAMM,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACF,OAAO,CAAC,EAAE;MAAET,IAAI,EAAE;IAAmB,CAAC,CAAC;IAC9D,MAAMY,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACJ,IAAI,CAAC;IACrC,MAAMK,CAAC,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;IACrCF,CAAC,CAACG,IAAI,GAAGN,GAAG;IACZG,CAAC,CAACI,QAAQ,GAAG,WAAW;IACxBJ,CAAC,CAACK,KAAK,CAAC,CAAC;IACTP,GAAG,CAACQ,eAAe,CAACT,GAAG,CAAC;IACxB;IACAnB,SAAS,CAAC;MAAEO,IAAI,EAAE,SAAS;MAAEM,KAAK,EAAE,eAAe;MAAEC,OAAO,EAAE;IAAsC,CAAC,CAAC;IACtGe,UAAU,CAAC,MAAM7B,SAAS,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC;EACzC;EAEA,oBACEN,OAAA;IAAAoC,QAAA,GAEG/B,MAAM,IAAIA,MAAM,CAACQ,IAAI,KAAK,OAAO,iBAChCb,OAAA,CAACF,MAAM;MACLe,IAAI,EAAER,MAAM,CAACQ,IAAK;MAClBM,KAAK,EAAEd,MAAM,CAACc,KAAM;MACpBC,OAAO,EAAEf,MAAM,CAACe,OAAQ;MACxBC,KAAK,EAAEhB,MAAM,CAACgB,KAAM;MACpBgB,OAAO,EAAEA,CAAA,KAAM/B,SAAS,CAAC,IAAI,CAAE;MAC/BgC,WAAW,EAAEC,IAAI,IAAI;QACnBnC,QAAQ,CAAC;UAAES,IAAI,EAAE,cAAc;UAAEC,EAAE,EAAEyB,IAAI,CAACzB;QAAG,CAAC,CAAC;QAC/CR,SAAS,CAAC,IAAI,CAAC;MACjB;IAAE;MAAAkC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACF,EAEAtC,MAAM,IAAIA,MAAM,CAACQ,IAAI,KAAK,SAAS,iBAClCb,OAAA;MAAK4C,SAAS,EAAC,YAAY;MAACC,QAAQ,EAAC,IAAI;MAACC,KAAK,EAAE;QAAEC,OAAO,EAAE,OAAO;QAAEC,UAAU,EAAE;MAAkB,CAAE;MAAAZ,QAAA,eACnGpC,OAAA;QAAK4C,SAAS,EAAC,cAAc;QAAAR,QAAA,eAC3BpC,OAAA;UAAK4C,SAAS,EAAC,eAAe;UAAAR,QAAA,eAC5BpC,OAAA;YAAK4C,SAAS,EAAC,YAAY;YAAAR,QAAA,eACzBpC,OAAA,CAACF,MAAM;cACLe,IAAI,EAAER,MAAM,CAACQ,IAAK;cAClBM,KAAK,EAAEd,MAAM,CAACc,KAAM;cACpBC,OAAO,EAAEf,MAAM,CAACe,OAAQ;cACxBiB,OAAO,EAAEA,CAAA,KAAM/B,SAAS,CAAC,IAAI;YAAE;cAAAkC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChC;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,eACD3C,OAAA;MAAQ4C,SAAS,EAAC,QAAQ;MAAAR,QAAA,gBACxBpC,OAAA;QAAK8C,KAAK,EAAE;UAAEC,OAAO,EAAE,MAAM;UAAEE,UAAU,EAAE,QAAQ;UAAEC,GAAG,EAAE;QAAG,CAAE;QAAAd,QAAA,eAC7DpC,OAAA;UAAAoC,QAAA,EAAQ;QAAc;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5B,CAAC,eACN3C,OAAA;QAAAoC,QAAA,eACEpC,OAAA;UAAQ4C,SAAS,EAAC,sBAAsB;UAACO,OAAO,EAAEpC,MAAO;UAAAqB,QAAA,EAAC;QAE1D;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV;AAACzC,EAAA,CA5FuBD,MAAM;EAAA,QACdP,YAAY,EACTC,eAAe;AAAA;AAAAyD,EAAA,GAFVnD,MAAM;AAAA,IAAAmD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}