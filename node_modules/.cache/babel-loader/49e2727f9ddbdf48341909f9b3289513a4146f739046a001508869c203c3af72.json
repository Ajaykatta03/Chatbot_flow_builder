{"ast":null,"code":"export function validateBeforeSave(nodes, edges) {\n  // nodes: array of node objects {id, data}\n  // edges: array of edge objects {id, source, target}\n  if (!nodes || nodes.length <= 1) return {\n    ok: true\n  };\n  const inboundCount = {};\n  nodes.forEach(n => inboundCount[n.id] = 0);\n  edges.forEach(e => {\n    if (e.target && inboundCount[e.target] !== undefined) inboundCount[e.target]++;\n  });\n  const emptyTargetNodes = nodes.filter(n => inboundCount[n.id] === 0);\n  if (emptyTargetNodes.length > 1) {\n    return {\n      ok: false,\n      reason: 'multiple_empty_targets',\n      nodes: emptyTargetNodes.map(n => {\n        var _n$data, _n$data2;\n        return {\n          id: n.id,\n          label: ((_n$data = n.data) === null || _n$data === void 0 ? void 0 : _n$data.label) || ((_n$data2 = n.data) === null || _n$data2 === void 0 ? void 0 : _n$data2.text) || n.id\n        };\n      })\n    };\n  }\n  return {\n    ok: true\n  };\n}","map":{"version":3,"names":["validateBeforeSave","nodes","edges","length","ok","inboundCount","forEach","n","id","e","target","undefined","emptyTargetNodes","filter","reason","map","_n$data","_n$data2","label","data","text"],"sources":["C:/Users/HP/Desktop/ChatBotFlow/bitespeed-flow-builder/src/utils/validators.js"],"sourcesContent":["export function validateBeforeSave(nodes, edges) {\r\n  // nodes: array of node objects {id, data}\r\n  // edges: array of edge objects {id, source, target}\r\n  if (!nodes || nodes.length <= 1) return { ok: true }\r\n\r\n  const inboundCount = {}\r\n  nodes.forEach(n => (inboundCount[n.id] = 0))\r\n  edges.forEach(e => {\r\n    if (e.target && inboundCount[e.target] !== undefined) inboundCount[e.target]++\r\n  })\r\n\r\n  const emptyTargetNodes = nodes.filter(n => inboundCount[n.id] === 0)\r\n\r\n  if (emptyTargetNodes.length > 1) {\r\n    return {\r\n      ok: false,\r\n      reason: 'multiple_empty_targets',\r\n      nodes: emptyTargetNodes.map(n => ({ id: n.id, label: n.data?.label || n.data?.text || n.id })),\r\n    }\r\n  }\r\n\r\n  return { ok: true }\r\n}\r\n"],"mappings":"AAAA,OAAO,SAASA,kBAAkBA,CAACC,KAAK,EAAEC,KAAK,EAAE;EAC/C;EACA;EACA,IAAI,CAACD,KAAK,IAAIA,KAAK,CAACE,MAAM,IAAI,CAAC,EAAE,OAAO;IAAEC,EAAE,EAAE;EAAK,CAAC;EAEpD,MAAMC,YAAY,GAAG,CAAC,CAAC;EACvBJ,KAAK,CAACK,OAAO,CAACC,CAAC,IAAKF,YAAY,CAACE,CAAC,CAACC,EAAE,CAAC,GAAG,CAAE,CAAC;EAC5CN,KAAK,CAACI,OAAO,CAACG,CAAC,IAAI;IACjB,IAAIA,CAAC,CAACC,MAAM,IAAIL,YAAY,CAACI,CAAC,CAACC,MAAM,CAAC,KAAKC,SAAS,EAAEN,YAAY,CAACI,CAAC,CAACC,MAAM,CAAC,EAAE;EAChF,CAAC,CAAC;EAEF,MAAME,gBAAgB,GAAGX,KAAK,CAACY,MAAM,CAACN,CAAC,IAAIF,YAAY,CAACE,CAAC,CAACC,EAAE,CAAC,KAAK,CAAC,CAAC;EAEpE,IAAII,gBAAgB,CAACT,MAAM,GAAG,CAAC,EAAE;IAC/B,OAAO;MACLC,EAAE,EAAE,KAAK;MACTU,MAAM,EAAE,wBAAwB;MAChCb,KAAK,EAAEW,gBAAgB,CAACG,GAAG,CAACR,CAAC;QAAA,IAAAS,OAAA,EAAAC,QAAA;QAAA,OAAK;UAAET,EAAE,EAAED,CAAC,CAACC,EAAE;UAAEU,KAAK,EAAE,EAAAF,OAAA,GAAAT,CAAC,CAACY,IAAI,cAAAH,OAAA,uBAANA,OAAA,CAAQE,KAAK,OAAAD,QAAA,GAAIV,CAAC,CAACY,IAAI,cAAAF,QAAA,uBAANA,QAAA,CAAQG,IAAI,KAAIb,CAAC,CAACC;QAAG,CAAC;MAAA,CAAC;IAC/F,CAAC;EACH;EAEA,OAAO;IAAEJ,EAAE,EAAE;EAAK,CAAC;AACrB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}